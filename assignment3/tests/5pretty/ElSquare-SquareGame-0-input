<class>
    <class-name>SquareGame</class-name>
    <class-var-decs>
        <var-dec>
            <var-segment>this</var-segment>
            <var-name>square</var-name>
            <var-offset>0</var-offset>
            <var-type>Square</var-type>
        </var-dec>
        <var-dec>
            <var-segment>this</var-segment>
            <var-name>direction</var-name>
            <var-offset>1</var-offset>
            <var-type>int</var-type>
        </var-dec>
    </class-var-decs>
    <subr-decs>
        <subr>
            <constructor>
                <vtype>SquareGame</vtype>
                <name>new</name>
                <param-list>
                </param-list>
                <subr-body>
                    <var-decs>
                    </var-decs>
                    <statements>
                        <statement>
                            <let>
                                <var>
                                    <var-segment>this</var-segment>
                                    <var-name>square</var-name>
                                    <var-offset>0</var-offset>
                                    <var-type>Square</var-type>
                                </var>
                                <expr>
                                    <term>
                                        <var>
                                            <var-segment>this</var-segment>
                                            <var-name>square</var-name>
                                            <var-offset>0</var-offset>
                                            <var-type>Square</var-type>
                                        </var>
                                    </term>
                                </expr>
                            </let>
                        </statement>
                        <statement>
                            <let>
                                <var>
                                    <var-segment>this</var-segment>
                                    <var-name>direction</var-name>
                                    <var-offset>1</var-offset>
                                    <var-type>int</var-type>
                                </var>
                                <expr>
                                    <term>
                                        <var>
                                            <var-segment>this</var-segment>
                                            <var-name>direction</var-name>
                                            <var-offset>1</var-offset>
                                            <var-type>int</var-type>
                                        </var>
                                    </term>
                                </expr>
                            </let>
                        </statement>
                        <statement>
                            <return-expr>
                                <expr>
                                    <term>
                                        <this>
                                        </this>
                                    </term>
                                </expr>
                            </return-expr>
                        </statement>
                    </statements>
                </subr-body>
            </constructor>
        </subr>
        <subr>
            <method>
                <vtype>void</vtype>
                <name>dispose</name>
                <param-list>
                </param-list>
                <subr-body>
                    <var-decs>
                    </var-decs>
                    <statements>
                        <statement>
                            <do>
                                <call-as-method>
                                    <class-name>Square</class-name>
                                    <var>
                                        <var-segment>this</var-segment>
                                        <var-name>square</var-name>
                                        <var-offset>0</var-offset>
                                        <var-type>Square</var-type>
                                    </var>
                                    <subr-call>
                                        <subr-name>dispose</subr-name>
                                        <expr-list>
                                        </expr-list>
                                    </subr-call>
                                </call-as-method>
                            </do>
                        </statement>
                        <statement>
                            <do>
                                <call-as-function>
                                    <class-name>Memory</class-name>
                                    <subr-call>
                                        <subr-name>deAlloc</subr-name>
                                        <expr-list>
                                            <expr>
                                                <term>
                                                    <var>
                                                        <var-segment>this</var-segment>
                                                        <var-name>square</var-name>
                                                        <var-offset>0</var-offset>
                                                        <var-type>Square</var-type>
                                                    </var>
                                                </term>
                                            </expr>
                                        </expr-list>
                                    </subr-call>
                                </call-as-function>
                            </do>
                        </statement>
                        <statement>
                            <return>
                            </return>
                        </statement>
                    </statements>
                </subr-body>
            </method>
        </subr>
        <subr>
            <method>
                <vtype>void</vtype>
                <name>run</name>
                <param-list>
                </param-list>
                <subr-body>
                    <var-decs>
                        <var-dec>
                            <var-segment>local</var-segment>
                            <var-name>key</var-name>
                            <var-offset>0</var-offset>
                            <var-type>char</var-type>
                        </var-dec>
                        <var-dec>
                            <var-segment>local</var-segment>
                            <var-name>exit</var-name>
                            <var-offset>1</var-offset>
                            <var-type>boolean</var-type>
                        </var-dec>
                    </var-decs>
                    <statements>
                        <statement>
                            <let>
                                <var>
                                    <var-segment>local</var-segment>
                                    <var-name>exit</var-name>
                                    <var-offset>1</var-offset>
                                    <var-type>boolean</var-type>
                                </var>
                                <expr>
                                    <term>
                                        <bool>
                                            <tf>true</tf>
                                        </bool>
                                    </term>
                                </expr>
                            </let>
                        </statement>
                        <statement>
                            <while>
                                <expr>
                                    <term>
                                        <var>
                                            <var-segment>local</var-segment>
                                            <var-name>exit</var-name>
                                            <var-offset>1</var-offset>
                                            <var-type>boolean</var-type>
                                        </var>
                                    </term>
                                </expr>
                                <statements>
                                    <statement>
                                        <while>
                                            <expr>
                                                <term>
                                                    <var>
                                                        <var-segment>local</var-segment>
                                                        <var-name>key</var-name>
                                                        <var-offset>0</var-offset>
                                                        <var-type>char</var-type>
                                                    </var>
                                                </term>
                                            </expr>
                                            <statements>
                                                <statement>
                                                    <let>
                                                        <var>
                                                            <var-segment>local</var-segment>
                                                            <var-name>key</var-name>
                                                            <var-offset>0</var-offset>
                                                            <var-type>char</var-type>
                                                        </var>
                                                        <expr>
                                                            <term>
                                                                <var>
                                                                    <var-segment>local</var-segment>
                                                                    <var-name>key</var-name>
                                                                    <var-offset>0</var-offset>
                                                                    <var-type>char</var-type>
                                                                </var>
                                                            </term>
                                                        </expr>
                                                    </let>
                                                </statement>
                                                <statement>
                                                    <do>
                                                        <call-as-method>
                                                            <class-name>SquareGame</class-name>
                                                            <this>
                                                            </this>
                                                            <subr-call>
                                                                <subr-name>moveSquare</subr-name>
                                                                <expr-list>
                                                                </expr-list>
                                                            </subr-call>
                                                        </call-as-method>
                                                    </do>
                                                </statement>
                                            </statements>
                                        </while>
                                    </statement>
                                    <statement>
                                        <if>
                                            <expr>
                                                <term>
                                                    <var>
                                                        <var-segment>local</var-segment>
                                                        <var-name>key</var-name>
                                                        <var-offset>0</var-offset>
                                                        <var-type>char</var-type>
                                                    </var>
                                                </term>
                                            </expr>
                                            <statements>
                                                <statement>
                                                    <let>
                                                        <var>
                                                            <var-segment>local</var-segment>
                                                            <var-name>exit</var-name>
                                                            <var-offset>1</var-offset>
                                                            <var-type>boolean</var-type>
                                                        </var>
                                                        <expr>
                                                            <term>
                                                                <var>
                                                                    <var-segment>local</var-segment>
                                                                    <var-name>exit</var-name>
                                                                    <var-offset>1</var-offset>
                                                                    <var-type>boolean</var-type>
                                                                </var>
                                                            </term>
                                                        </expr>
                                                    </let>
                                                </statement>
                                            </statements>
                                        </if>
                                    </statement>
                                    <statement>
                                        <if>
                                            <expr>
                                                <term>
                                                    <var>
                                                        <var-segment>local</var-segment>
                                                        <var-name>key</var-name>
                                                        <var-offset>0</var-offset>
                                                        <var-type>char</var-type>
                                                    </var>
                                                </term>
                                            </expr>
                                            <statements>
                                                <statement>
                                                    <do>
                                                        <call-as-method>
                                                            <class-name>Square</class-name>
                                                            <var>
                                                                <var-segment>this</var-segment>
                                                                <var-name>square</var-name>
                                                                <var-offset>0</var-offset>
                                                                <var-type>Square</var-type>
                                                            </var>
                                                            <subr-call>
                                                                <subr-name>decSize</subr-name>
                                                                <expr-list>
                                                                </expr-list>
                                                            </subr-call>
                                                        </call-as-method>
                                                    </do>
                                                </statement>
                                            </statements>
                                        </if>
                                    </statement>
                                    <statement>
                                        <if>
                                            <expr>
                                                <term>
                                                    <var>
                                                        <var-segment>local</var-segment>
                                                        <var-name>key</var-name>
                                                        <var-offset>0</var-offset>
                                                        <var-type>char</var-type>
                                                    </var>
                                                </term>
                                            </expr>
                                            <statements>
                                                <statement>
                                                    <do>
                                                        <call-as-method>
                                                            <class-name>Square</class-name>
                                                            <var>
                                                                <var-segment>this</var-segment>
                                                                <var-name>square</var-name>
                                                                <var-offset>0</var-offset>
                                                                <var-type>Square</var-type>
                                                            </var>
                                                            <subr-call>
                                                                <subr-name>incSize</subr-name>
                                                                <expr-list>
                                                                </expr-list>
                                                            </subr-call>
                                                        </call-as-method>
                                                    </do>
                                                </statement>
                                            </statements>
                                        </if>
                                    </statement>
                                    <statement>
                                        <if>
                                            <expr>
                                                <term>
                                                    <var>
                                                        <var-segment>local</var-segment>
                                                        <var-name>key</var-name>
                                                        <var-offset>0</var-offset>
                                                        <var-type>char</var-type>
                                                    </var>
                                                </term>
                                            </expr>
                                            <statements>
                                                <statement>
                                                    <let>
                                                        <var>
                                                            <var-segment>this</var-segment>
                                                            <var-name>direction</var-name>
                                                            <var-offset>1</var-offset>
                                                            <var-type>int</var-type>
                                                        </var>
                                                        <expr>
                                                            <term>
                                                                <int>
                                                                    <ic>0</ic>
                                                                </int>
                                                            </term>
                                                        </expr>
                                                    </let>
                                                </statement>
                                            </statements>
                                        </if>
                                    </statement>
                                    <statement>
                                        <if>
                                            <expr>
                                                <term>
                                                    <var>
                                                        <var-segment>local</var-segment>
                                                        <var-name>key</var-name>
                                                        <var-offset>0</var-offset>
                                                        <var-type>char</var-type>
                                                    </var>
                                                </term>
                                            </expr>
                                            <statements>
                                                <statement>
                                                    <let>
                                                        <var>
                                                            <var-segment>this</var-segment>
                                                            <var-name>direction</var-name>
                                                            <var-offset>1</var-offset>
                                                            <var-type>int</var-type>
                                                        </var>
                                                        <expr>
                                                            <term>
                                                                <int>
                                                                    <ic>1</ic>
                                                                </int>
                                                            </term>
                                                        </expr>
                                                    </let>
                                                </statement>
                                            </statements>
                                        </if>
                                    </statement>
                                    <statement>
                                        <if>
                                            <expr>
                                                <term>
                                                    <var>
                                                        <var-segment>local</var-segment>
                                                        <var-name>key</var-name>
                                                        <var-offset>0</var-offset>
                                                        <var-type>char</var-type>
                                                    </var>
                                                </term>
                                            </expr>
                                            <statements>
                                                <statement>
                                                    <let>
                                                        <var>
                                                            <var-segment>this</var-segment>
                                                            <var-name>direction</var-name>
                                                            <var-offset>1</var-offset>
                                                            <var-type>int</var-type>
                                                        </var>
                                                        <expr>
                                                            <term>
                                                                <var>
                                                                    <var-segment>this</var-segment>
                                                                    <var-name>square</var-name>
                                                                    <var-offset>0</var-offset>
                                                                    <var-type>Square</var-type>
                                                                </var>
                                                            </term>
                                                        </expr>
                                                    </let>
                                                </statement>
                                            </statements>
                                        </if>
                                    </statement>
                                    <statement>
                                        <if>
                                            <expr>
                                                <term>
                                                    <var>
                                                        <var-segment>local</var-segment>
                                                        <var-name>key</var-name>
                                                        <var-offset>0</var-offset>
                                                        <var-type>char</var-type>
                                                    </var>
                                                </term>
                                            </expr>
                                            <statements>
                                                <statement>
                                                    <let>
                                                        <var>
                                                            <var-segment>this</var-segment>
                                                            <var-name>direction</var-name>
                                                            <var-offset>1</var-offset>
                                                            <var-type>int</var-type>
                                                        </var>
                                                        <expr>
                                                            <term>
                                                                <var>
                                                                    <var-segment>this</var-segment>
                                                                    <var-name>direction</var-name>
                                                                    <var-offset>1</var-offset>
                                                                    <var-type>int</var-type>
                                                                </var>
                                                            </term>
                                                        </expr>
                                                    </let>
                                                </statement>
                                            </statements>
                                        </if>
                                    </statement>
                                    <statement>
                                        <while>
                                            <expr>
                                                <term>
                                                    <var>
                                                        <var-segment>local</var-segment>
                                                        <var-name>key</var-name>
                                                        <var-offset>0</var-offset>
                                                        <var-type>char</var-type>
                                                    </var>
                                                </term>
                                            </expr>
                                            <statements>
                                                <statement>
                                                    <let>
                                                        <var>
                                                            <var-segment>local</var-segment>
                                                            <var-name>key</var-name>
                                                            <var-offset>0</var-offset>
                                                            <var-type>char</var-type>
                                                        </var>
                                                        <expr>
                                                            <term>
                                                                <var>
                                                                    <var-segment>local</var-segment>
                                                                    <var-name>key</var-name>
                                                                    <var-offset>0</var-offset>
                                                                    <var-type>char</var-type>
                                                                </var>
                                                            </term>
                                                        </expr>
                                                    </let>
                                                </statement>
                                                <statement>
                                                    <do>
                                                        <call-as-method>
                                                            <class-name>SquareGame</class-name>
                                                            <this>
                                                            </this>
                                                            <subr-call>
                                                                <subr-name>moveSquare</subr-name>
                                                                <expr-list>
                                                                </expr-list>
                                                            </subr-call>
                                                        </call-as-method>
                                                    </do>
                                                </statement>
                                            </statements>
                                        </while>
                                    </statement>
                                </statements>
                            </while>
                        </statement>
                        <statement>
                            <return>
                            </return>
                        </statement>
                    </statements>
                </subr-body>
            </method>
        </subr>
        <subr>
            <method>
                <vtype>void</vtype>
                <name>moveSquare</name>
                <param-list>
                </param-list>
                <subr-body>
                    <var-decs>
                    </var-decs>
                    <statements>
                        <statement>
                            <if>
                                <expr>
                                    <term>
                                        <var>
                                            <var-segment>this</var-segment>
                                            <var-name>direction</var-name>
                                            <var-offset>1</var-offset>
                                            <var-type>int</var-type>
                                        </var>
                                    </term>
                                </expr>
                                <statements>
                                    <statement>
                                        <do>
                                            <call-as-method>
                                                <class-name>Square</class-name>
                                                <var>
                                                    <var-segment>this</var-segment>
                                                    <var-name>square</var-name>
                                                    <var-offset>0</var-offset>
                                                    <var-type>Square</var-type>
                                                </var>
                                                <subr-call>
                                                    <subr-name>moveUp</subr-name>
                                                    <expr-list>
                                                    </expr-list>
                                                </subr-call>
                                            </call-as-method>
                                        </do>
                                    </statement>
                                </statements>
                            </if>
                        </statement>
                        <statement>
                            <if>
                                <expr>
                                    <term>
                                        <var>
                                            <var-segment>this</var-segment>
                                            <var-name>direction</var-name>
                                            <var-offset>1</var-offset>
                                            <var-type>int</var-type>
                                        </var>
                                    </term>
                                </expr>
                                <statements>
                                    <statement>
                                        <do>
                                            <call-as-method>
                                                <class-name>Square</class-name>
                                                <var>
                                                    <var-segment>this</var-segment>
                                                    <var-name>square</var-name>
                                                    <var-offset>0</var-offset>
                                                    <var-type>Square</var-type>
                                                </var>
                                                <subr-call>
                                                    <subr-name>moveDown</subr-name>
                                                    <expr-list>
                                                    </expr-list>
                                                </subr-call>
                                            </call-as-method>
                                        </do>
                                    </statement>
                                </statements>
                            </if>
                        </statement>
                        <statement>
                            <if>
                                <expr>
                                    <term>
                                        <var>
                                            <var-segment>this</var-segment>
                                            <var-name>direction</var-name>
                                            <var-offset>1</var-offset>
                                            <var-type>int</var-type>
                                        </var>
                                    </term>
                                </expr>
                                <statements>
                                    <statement>
                                        <do>
                                            <call-as-method>
                                                <class-name>Square</class-name>
                                                <var>
                                                    <var-segment>this</var-segment>
                                                    <var-name>square</var-name>
                                                    <var-offset>0</var-offset>
                                                    <var-type>Square</var-type>
                                                </var>
                                                <subr-call>
                                                    <subr-name>moveLeft</subr-name>
                                                    <expr-list>
                                                    </expr-list>
                                                </subr-call>
                                            </call-as-method>
                                        </do>
                                    </statement>
                                </statements>
                            </if>
                        </statement>
                        <statement>
                            <if>
                                <expr>
                                    <term>
                                        <var>
                                            <var-segment>this</var-segment>
                                            <var-name>direction</var-name>
                                            <var-offset>1</var-offset>
                                            <var-type>int</var-type>
                                        </var>
                                    </term>
                                </expr>
                                <statements>
                                    <statement>
                                        <do>
                                            <call-as-method>
                                                <class-name>Square</class-name>
                                                <var>
                                                    <var-segment>this</var-segment>
                                                    <var-name>square</var-name>
                                                    <var-offset>0</var-offset>
                                                    <var-type>Square</var-type>
                                                </var>
                                                <subr-call>
                                                    <subr-name>moveRight</subr-name>
                                                    <expr-list>
                                                    </expr-list>
                                                </subr-call>
                                            </call-as-method>
                                        </do>
                                    </statement>
                                </statements>
                            </if>
                        </statement>
                        <statement>
                            <do>
                                <call-as-function>
                                    <class-name>Sys</class-name>
                                    <subr-call>
                                        <subr-name>wait</subr-name>
                                        <expr-list>
                                            <expr>
                                                <term>
                                                    <var>
                                                        <var-segment>this</var-segment>
                                                        <var-name>direction</var-name>
                                                        <var-offset>1</var-offset>
                                                        <var-type>int</var-type>
                                                    </var>
                                                </term>
                                            </expr>
                                        </expr-list>
                                    </subr-call>
                                </call-as-function>
                            </do>
                        </statement>
                        <statement>
                            <return>
                            </return>
                        </statement>
                    </statements>
                </subr-body>
            </method>
        </subr>
    </subr-decs>
</class>
